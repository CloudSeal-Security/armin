# Controller HA 設計決策點

基於 OpenZiti 官方文件，需要你決定以下事項：

## 1. HA 模式選擇
- **選項 A**: 使用 RAFT 共識協議的完整 HA（官方推薦）V
  - 優點：自動故障切換、資料同步、無需手動介入
  - 缺點：配置複雜、需要奇數節點（最少3個）
  
- **選項 B**: 簡化的主備模式（你之前提到的）
  - 優點：配置簡單、只需2個節點
  - 缺點：需要手動切換、可能有資料遺失

## 2. 節點數量
如果選擇 RAFT 模式：
- **3 節點**：可容忍 1 個節點故障 V
- **5 節點**：可容忍 2 個節點故障

## 3. PKI 憑證管理
- **選項 A**: 共用同一套 CA 憑證 V
- **選項 B**: 每個控制器獨立憑證，但同一 CA 簽發

## 4. 資料儲存
- **選項 A**: 使用 RAFT 內建的分散式儲存 V
- **選項 B**: 保持 BoltDB 本地儲存 + 定期備份

## 5. Router 連線策略
- **選項 A**: Router 連接所有控制器（官方推薦）V
- **選項 B**: Router 只連接主控制器

## 6. 實作範圍
- **選項 A**: 完整實作包含自動故障切換 V
- **選項 B**: 只實作基本 HA 架構，手動故障切換

請告訴我你的選擇，我會據此生成對應的 SDS 文件。